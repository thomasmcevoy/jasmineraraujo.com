import{RemoveScroll as e}from"react-remove-scroll";import{hideOthers as t}from"aria-hidden";import{VisuallyHidden as o}from"@radix-ui/react-visually-hidden";import{usePrevious as n}from"@radix-ui/react-use-previous";import{useLayoutEffect as r}from"@radix-ui/react-use-layout-effect";import{useControllableState as l}from"@radix-ui/react-use-controllable-state";import{useCallbackRef as c}from"@radix-ui/react-use-callback-ref";import{Primitive as a}from"@radix-ui/react-primitive";import{Portal as i}from"@radix-ui/react-portal";import{useLabelContext as s}from"@radix-ui/react-label";import{useId as u}from"@radix-ui/react-id";import{FocusScope as d}from"@radix-ui/react-focus-scope";import{DismissableLayer as p}from"@radix-ui/react-dismissable-layer";import{createContextScope as f}from"@radix-ui/react-context";import{useComposedRefs as m}from"@radix-ui/react-compose-refs";import{createCollection as v}from"@radix-ui/react-collection";import{composeEventHandlers as S}from"@radix-ui/primitive";import{clamp as h}from"@radix-ui/number";import*as g from"react-dom";import*as x from"react";import w from"@babel/runtime/helpers/esm/extends";const b=[" ","Enter","ArrowUp","ArrowDown"],y=[" ","Enter"],[E,C,I]=v("Select"),[T,_]=f("Select",[I]);export{_ as createSelectScope};const[R,D]=T("Select");export const Select=e=>{const{__scopeSelect:t,children:o,open:n,defaultOpen:r,onOpenChange:c,value:a,defaultValue:i,onValueChange:s,dir:d,name:p,autoComplete:f}=e,[m,v]=x.useState(null),[S,h]=x.useState(null),[g,w]=x.useState(!1),[b=!1,y]=l({prop:n,defaultProp:r,onChange:c}),[C="",I]=l({prop:a,defaultProp:i,onChange:s}),T=!m||Boolean(m.closest("form")),[_,D]=x.useState(null),P=x.useRef(null);/*#__PURE__*/return x.createElement(R,{scope:t,trigger:m,onTriggerChange:v,valueNode:S,onValueNodeChange:h,valueNodeHasChildren:g,onValueNodeHasChildrenChange:w,contentId:u(),value:C,onValueChange:I,open:b,onOpenChange:y,dir:d,bubbleSelect:_,triggerPointerDownPosRef:P},/*#__PURE__*/x.createElement(E.Provider,{scope:t},o),T?/*#__PURE__*/x.createElement(O,{ref:D,"aria-hidden":!0,tabIndex:-1,name:p,autoComplete:f,value:C,onChange:e=>I(e.target.value)}):null)};/*#__PURE__*/export const SelectTrigger=/*#__PURE__*/x.forwardRef(((e,t)=>{const{__scopeSelect:o,disabled:n=!1,"aria-labelledby":r,...l}=e,c=D("SelectTrigger",o),i=m(t,c.onTriggerChange),u=C(o),d=s(c.trigger),p=r||d,[f,v,h]=N((e=>{const t=u().filter((e=>!e.disabled)),o=t.find((e=>e.value===c.value)),n=K(t,e,o);void 0!==n&&c.onValueChange(n.value)})),g=()=>{n||(c.onOpenChange(!0),h())};/*#__PURE__*/return x.createElement(a.button,w({type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-autocomplete":"none","aria-labelledby":p,dir:c.dir,disabled:n,"data-disabled":n?"":void 0},l,{ref:i,onPointerDown:S(l.onPointerDown,(e=>{e.target.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&(g(),c.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)},e.preventDefault())})),onKeyDown:S(l.onKeyDown,(e=>{const t=""!==f.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||v(e.key),t&&" "===e.key||b.includes(e.key)&&(g(),e.preventDefault())}))}))}));/*#__PURE__*/export const SelectValue=/*#__PURE__*/x.forwardRef(((e,t)=>{const{__scopeSelect:o,className:n,style:r,...l}=e,c=D("SelectValue",o),{onValueNodeHasChildrenChange:i}=c,s=void 0!==e.children,u=m(t,c.onValueNodeChange);return x.useEffect((()=>{i(s)}),[i,s]),/*#__PURE__*/x.createElement(a.span,w({},l,{ref:u,style:{pointerEvents:"none"}}))}));/*#__PURE__*/export const SelectIcon=/*#__PURE__*/x.forwardRef(((e,t)=>{const{__scopeSelect:o,children:n,...r}=e;/*#__PURE__*/return x.createElement(a.span,w({"aria-hidden":!0},r,{ref:t}),n||"â–¼")}));/*#__PURE__*/export const SelectContent=/*#__PURE__*/x.forwardRef(((e,t)=>{const o=D("SelectContent",e.__scopeSelect),[n,l]=x.useState();return r((()=>{l(new DocumentFragment)}),[]),o.open?/*#__PURE__*/x.createElement(k,w({},e,{ref:t})):n?/*#__PURE__*/g.createPortal(/*#__PURE__*/
x.createElement(P,{scope:e.__scopeSelect},/*#__PURE__*/x.createElement(E.Slot,{scope:e.__scopeSelect},/*#__PURE__*/x.createElement("div",null,e.children))),n):null}));const[P,L]=T("SelectContent"),k=/*#__PURE__*/x.forwardRef(((o,n)=>{const{__scopeSelect:l,onCloseAutoFocus:c,children:a,...s}=o,u=D("SelectContent",l),[f,v]=x.useState(null),[g,b]=x.useState(null),[y,E]=x.useState(null),I=m(n,(e=>b(e))),[T,_]=x.useState(null),[R,L]=x.useState(null),k=C(l),[V,H]=x.useState(!1),M=x.useRef(!0),B=x.useRef(!1);x.useEffect((()=>{if(g)return t(g)}),[g]);const A=x.useCallback((e=>{const[t,...o]=k().map((e=>e.ref.current)),[n]=o.slice(-1),r=document.activeElement;for(const o of e){if(o===r)return;if(null==o||o.scrollIntoView({block:"nearest"}),o===t&&y&&(y.scrollTop=0),o===n&&y&&(y.scrollTop=y.scrollHeight),null==o||o.focus(),document.activeElement!==r)return}}),[k,y]),O=x.useCallback((()=>{if(u.trigger&&u.valueNode&&f&&g&&y&&T&&R){const e=u.trigger.getBoundingClientRect(),t=g.getBoundingClientRect(),o=u.valueNode.getBoundingClientRect(),n=R.getBoundingClientRect();if("rtl"!==u.dir){const r=n.left-t.left,l=o.left-r,c=e.left-l,a=e.width+c,i=Math.max(a,t.width),s=window.innerWidth-10,u=h(l,[10,s-i]);f.style.minWidth=a+"px",f.style.left=u+"px"}else{const r=t.right-n.right,l=window.innerWidth-o.right-r,c=window.innerWidth-e.right-l,a=e.width+c,i=Math.max(a,t.width),s=window.innerWidth-10,u=h(l,[10,s-i]);f.style.minWidth=a+"px",f.style.right=u+"px"}const r=window.innerHeight-20,l=5*T.offsetHeight,c=y.scrollHeight,a=window.getComputedStyle(g),i=parseInt(a.borderTopWidth,10),s=parseInt(a.paddingTop,10),d=parseInt(a.borderBottomWidth,10),p=i+s+c+parseInt(a.paddingBottom,10)+d,m=e.top+e.height/2-10,v=r-m,S=T.offsetHeight/2,x=i+(T.offsetTop+S),w=p-x;if(x<=m){f.style.bottom="0px";const e=g.clientHeight-y.offsetTop-y.offsetHeight,t=x+Math.max(v,S+e+d);f.style.height=t+"px"}else{f.style.top="0px";const e=Math.max(m,i+y.offsetTop+S)+w;f.style.height=e+"px",y.scrollTop=x-m+y.offsetTop}f.style.margin="10px 0",f.style.minHeight=l+"px",f.style.maxHeight=r+"px",H(!0),requestAnimationFrame((()=>B.current=!0))}}),[u.trigger,u.valueNode,f,g,y,T,R,u.dir]);r((()=>O()),[O]);const F=x.useCallback((()=>A([T,g])),[A,T,g]);x.useEffect((()=>{V&&F()}),[V,F]);const U=x.useCallback((e=>{e&&!0===M.current&&(O(),F(),M.current=!1)}),[O,F]),{onOpenChange:W,triggerPointerDownPosRef:z}=u;x.useEffect((()=>{if(g){let e={x:0,y:0};const t=t=>{var o,n,r,l;e={x:Math.abs(Math.round(t.pageX)-(null!==(o=null===(n=z.current)||void 0===n?void 0:n.x)&&void 0!==o?o:0)),y:Math.abs(Math.round(t.pageY)-(null!==(r=null===(l=z.current)||void 0===l?void 0:l.y)&&void 0!==r?r:0))}},o=o=>{e.x<=10&&e.y<=10?o.preventDefault():g.contains(o.target)||W(!1),document.removeEventListener("pointermove",t),z.current=null};return null!==z.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",o,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",o,{capture:!0})}}}),[g,W,z]),x.useEffect((()=>{const e=()=>W(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}}),[W]);const[G,j]=N((e=>{const t=k().filter((e=>!e.disabled)),o=t.find((e=>e.ref.current===document.activeElement)),n=K(t,e,o);n&&setTimeout((()=>n.ref.current.focus()))})),X=x.useCallback((()=>null==g?void 0:g.focus()),[g]);/*#__PURE__*/return x.createElement(i,null,/*#__PURE__*/x.createElement(e,null,/*#__PURE__*/x.createElement("div",{ref:v,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:0}},/*#__PURE__*/x.createElement(d,{asChild:!0,trapped:u.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:S(c,(e=>{var t;null===(t=u.trigger)||void 0===t||t.focus({preventScroll:!0}),e.preventDefault()}))},/*#__PURE__*/x.createElement(p,w({role:"listbox",id:u.contentId,"data-state":u.open?"open":"closed",dir:u.dir,onContextMenu:e=>e.preventDefault()},s,{ref:I,style:{display:"flex",flexDirection:"column",boxSizing:"border-box",maxHeight:"100%",outline:"none",...s.style},disableOutsidePointerEvents:!0,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>u.onOpenChange(!1),onKeyDown:S(s.onKeyDown,(e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||j(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=k().filter((e=>!e.disabled)).map((e=>e.ref.current));if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const o=e.target,n=t.indexOf(o);t=t.slice(n+1)}setTimeout((()=>A(t))),e.preventDefault()}}))}),/*#__PURE__*/x.createElement(P,{scope:l,contentWrapper:f,content:g,viewport:y,onViewportChange:E,selectedItem:T,onSelectedItemChange:_,selectedItemText:R,onSelectedItemTextChange:L,onScrollButtonChange:U,onItemLeave:X,isPositioned:V,shouldExpandOnScrollRef:B,searchRef:G},a))))))}));export const SelectViewport=/*#__PURE__*/x.forwardRef(((e,t)=>{const{__scopeSelect:o,...n}=e,r=L("SelectViewport",o),l=m(t,r.onViewportChange),c=x.useRef(0);/*#__PURE__*/return x.createElement(x.Fragment,null,/*#__PURE__*/x.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),/*#__PURE__*/x.createElement(E.Slot,{scope:o},/*#__PURE__*/x.createElement(a.div,w({"data-radix-select-viewport":"",role:"presentation"},n,{ref:l,style:{position:"relative",flex:1,overflow:"auto",...n.style},onScroll:S(n.onScroll,(e=>{const t=e.currentTarget,{contentWrapper:o,shouldExpandOnScrollRef:n}=r;if(n.current&&o){const e=Math.abs(c.current-t.scrollTop);if(e>0){const n=window.innerHeight-20,r=parseFloat(o.style.minHeight),l=parseFloat(o.style.height),c=Math.max(r,l);if(c<n){const r=c+e,l=Math.min(n,r),a=r-l;o.style.height=l+"px","0px"===o.style.bottom&&(t.scrollTop=a>0?a:0,o.style.justifyContent="flex-end")}}}c.current=t.scrollTop}))}))))}));/*#__PURE__*/const[V,H]=T("SelectGroup");export const SelectGroup=/*#__PURE__*/x.forwardRef(((e,t)=>{const{__scopeSelect:o,...n}=e,r=u();/*#__PURE__*/return x.createElement(V,{scope:o,id:r},/*#__PURE__*/x.createElement(a.div,w({role:"group","aria-labelledby":r},n,{ref:t})))}));/*#__PURE__*/export const SelectLabel=/*#__PURE__*/x.forwardRef(((e,t)=>{const{__scopeSelect:o,...n}=e,r=H("SelectLabel",o);/*#__PURE__*/return x.createElement(a.div,w({id:r.id},n,{ref:t}))}));/*#__PURE__*/const[M,B]=T("SelectItem");export const SelectItem=/*#__PURE__*/x.forwardRef(((e,t)=>{const{__scopeSelect:o,value:n,disabled:r=!1,textValue:l,...c}=e,i=D("SelectItem",o),s=L("SelectItem",o),d=i.value===n,[p,f]=x.useState(null!=l?l:""),[v,h]=x.useState(!1),g=m(t,d?s.onSelectedItemChange:void 0),b=u(),C=()=>{r||(i.onValueChange(n),i.onOpenChange(!1))};/*#__PURE__*/return x.createElement(M,{scope:o,value:n,textId:b,isSelected:d,onItemTextChange:x.useCallback((e=>{f((t=>{var o;return t||(null!==(o=null==e?void 0:e.textContent)&&void 0!==o?o:"").trim()}))}),[])},/*#__PURE__*/x.createElement(E.ItemSlot,{scope:o,value:n,disabled:r,textValue:p},/*#__PURE__*/x.createElement(a.div,w({role:"option","aria-labelledby":b,"aria-selected":d&&v,"data-state":d?"active":"inactive","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1},c,{ref:g,onFocus:S(c.onFocus,(()=>h(!0))),onBlur:S(c.onBlur,(()=>h(!1))),onPointerUp:S(c.onPointerUp,C),onPointerMove:S(c.onPointerMove,(e=>{r?s.onItemLeave():e.currentTarget.focus({preventScroll:!0})})),onPointerLeave:S(c.onPointerLeave,(e=>{e.currentTarget===document.activeElement&&s.onItemLeave()})),onKeyDown:S(c.onKeyDown,(e=>{""!==s.searchRef.current&&" "===e.key||(y.includes(e.key)&&C()," "===e.key&&e.preventDefault())}))}))))}));/*#__PURE__*/export const SelectItemText=/*#__PURE__*/x.forwardRef(((e,t)=>{var o;const{__scopeSelect:n,className:r,style:l,...c}=e,i=D("SelectItemText",n),s=L("SelectItemText",n),u=B("SelectItemText",n),d=x.useRef(null),p=m(t,d,u.onItemTextChange,u.isSelected?s.onSelectedItemTextChange:void 0);/*#__PURE__*/return x.createElement(x.Fragment,null,/*#__PURE__*/x.createElement(a.span,w({id:u.textId},c,{ref:p})),u.isSelected&&i.valueNode&&!i.valueNodeHasChildren?/*#__PURE__*/g.createPortal(c.children,i.valueNode):null,i.bubbleSelect?/*#__PURE__*/g.createPortal(/*#__PURE__*/
x.createElement("option",{value:u.value},null===(o=d.current)||void 0===o?void 0:o.textContent),i.bubbleSelect):null)}));/*#__PURE__*/export const SelectItemIndicator=/*#__PURE__*/x.forwardRef(((e,t)=>{const{__scopeSelect:o,...n}=e;return B("SelectItemIndicator",o).isSelected?/*#__PURE__*/x.createElement(a.span,w({"aria-hidden":!0},n,{ref:t})):null}));/*#__PURE__*/export const SelectScrollUpButton=/*#__PURE__*/x.forwardRef(((e,t)=>{const o=L("SelectScrollUpButton",e.__scopeSelect),[n,r]=x.useState(!1),l=m(t,o.onScrollButtonChange);return x.useEffect((()=>{if(o.viewport&&o.isPositioned){const t=o.viewport;function e(){const e=t.scrollTop>0;r(e)}return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}}),[o.viewport,o.isPositioned]),n?/*#__PURE__*/x.createElement(A,w({},e,{ref:l,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=o;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}})):null}));/*#__PURE__*/export const SelectScrollDownButton=/*#__PURE__*/x.forwardRef(((e,t)=>{const o=L("SelectScrollDownButton",e.__scopeSelect),[n,r]=x.useState(!1),l=m(t,o.onScrollButtonChange);return x.useEffect((()=>{if(o.viewport&&o.isPositioned){const t=o.viewport;function e(){const e=t.scrollHeight-t.clientHeight,o=Math.ceil(t.scrollTop)<e;r(o)}return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}}),[o.viewport,o.isPositioned]),n?/*#__PURE__*/x.createElement(A,w({},e,{ref:l,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=o;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}})):null}));/*#__PURE__*/const A=/*#__PURE__*/x.forwardRef(((e,t)=>{const{__scopeSelect:o,onAutoScroll:n,...l}=e,c=L("SelectScrollButton",o),i=x.useRef(null),s=C(o),u=x.useCallback((()=>{null!==i.current&&(window.clearInterval(i.current),i.current=null)}),[]);return x.useEffect((()=>()=>u()),[u]),r((()=>{var e;const t=s().find((e=>e.ref.current===document.activeElement));null==t||null===(e=t.ref.current)||void 0===e||e.scrollIntoView({block:"nearest"})}),[s]),/*#__PURE__*/x.createElement(a.div,w({"aria-hidden":!0},l,{ref:t,style:{flexShrink:0,...l.style},onPointerMove:S(l.onPointerMove,(()=>{c.onItemLeave(),null===i.current&&(i.current=window.setInterval(n,50))})),onPointerLeave:S(l.onPointerLeave,(()=>{u()}))}))}));export const SelectSeparator=/*#__PURE__*/x.forwardRef(((e,t)=>{const{__scopeSelect:o,...n}=e;/*#__PURE__*/return x.createElement(a.div,w({"aria-hidden":!0},n,{ref:t}))}));/*#__PURE__*/const O=/*#__PURE__*/x.forwardRef(((e,t)=>{const{value:r,...l}=e,c=x.useRef(null),a=m(t,c),i=n(r);return x.useEffect((()=>{const e=c.current,t=window.HTMLSelectElement.prototype,o=Object.getOwnPropertyDescriptor(t,"value").set;if(i!==r&&o){const t=new Event("change",{bubbles:!0});o.call(e,r),e.dispatchEvent(t)}}),[i,r]),/*#__PURE__*/x.createElement(o,{asChild:!0},/*#__PURE__*/x.createElement("select",w({},l,{ref:a,defaultValue:r})))}));function N(e){const t=c(e),o=x.useRef(""),n=x.useRef(0),r=x.useCallback((e=>{const r=o.current+e;t(r),function e(t){o.current=t,window.clearTimeout(n.current),""!==t&&(n.current=window.setTimeout((()=>e("")),1e3))}(r)}),[t]),l=x.useCallback((()=>{o.current="",window.clearTimeout(n.current)}),[]);return x.useEffect((()=>()=>window.clearTimeout(n.current)),[]),[o,r,l]}function K(e,t,o){const n=t.length>1&&Array.from(t).every((e=>e===t[0]))?t[0]:t,r=o?e.indexOf(o):-1;let l=(c=e,a=Math.max(r,0),c.map(((e,t)=>c[(a+t)%c.length])));var c,a;1===n.length&&(l=l.filter((e=>e!==o)));const i=l.find((e=>e.textValue.toLowerCase().startsWith(n.toLowerCase())));return i!==o?i:void 0}export const Root=Select;export const Trigger=SelectTrigger;export const Value=SelectValue;export const Icon=SelectIcon;export const Content=SelectContent;export const Viewport=SelectViewport;export const Group=SelectGroup;export const Label=SelectLabel;export const Item=SelectItem;export const ItemText=SelectItemText;export const ItemIndicator=SelectItemIndicator;export const ScrollUpButton=SelectScrollUpButton;export const ScrollDownButton=SelectScrollDownButton;export const Separator=SelectSeparator;
//# sourceMappingURL=index.module.js.map
